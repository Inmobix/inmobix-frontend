<section
  class="min-h-screen flex items-center justify-center bg-gray-50 px-4 py-8"
>
  <div class="max-w-md w-full bg-white rounded-xl shadow-lg p-10 m-4">
    <h2 class="text-3xl font-bold text-gray-900 text-center mb-6">
      Restablecer Contraseña
    </h2>

    <p class="text-gray-600 text-center mb-6">
      Ingresa el código de verificación que recibiste por correo y tu nueva contraseña.
    </p>

    <form class="space-y-4" (ngSubmit)="onSubmit()">
      <!-- Código de verificación -->
      <div>
        <label for="code" class="block text-gray-700 font-medium mb-2"
          >Código de verificación</label
        >
        <input
          type="text"
          id="code"
          [(ngModel)]="code"
          name="code"
          placeholder="Ingresa el código de 6 dígitos"
          maxlength="6"
          (blur)="validateCode()"
          [disabled]="isLoading"
          class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none placeholder-gray-400 disabled:bg-gray-100"
          [class.border-red-500]="codeInvalid"
        />
        <p *ngIf="codeInvalid" class="text-red-500 text-sm mt-1">
          El código debe tener 6 dígitos.
        </p>
      </div>

      <!-- Nueva contraseña -->
      <div>
        <label for="password" class="block text-gray-700 font-medium mb-2"
          >Nueva contraseña</label
        >
        <div class="relative">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            [(ngModel)]="password"
            name="password"
            placeholder="Ingresa tu nueva contraseña"
            (blur)="validatePassword()"
            [disabled]="isLoading"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none placeholder-gray-400 disabled:bg-gray-100 pr-10"
            [class.border-red-500]="passwordInvalid"
          />
          <button
            type="button"
            (click)="togglePasswordVisibility()"
            class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700"
          >
            <iconify-icon
              [icon]="showPassword ? 'mdi:eye-off' : 'mdi:eye'"
              width="20"
              height="20"
            ></iconify-icon>
          </button>
        </div>
        <p *ngIf="passwordInvalid" class="text-red-500 text-sm mt-1">
          La contraseña debe tener al menos 8 caracteres.
        </p>
      </div>

      <!-- Confirmar contraseña -->
      <div>
        <label
          for="confirmPassword"
          class="block text-gray-700 font-medium mb-2"
          >Confirmar contraseña</label
        >
        <div class="relative">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            placeholder="Confirma tu nueva contraseña"
            (blur)="validateConfirmPassword()"
            [disabled]="isLoading"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none placeholder-gray-400 disabled:bg-gray-100 pr-10"
            [class.border-red-500]="confirmPasswordInvalid"
          />
          <button
            type="button"
            (click)="toggleConfirmPasswordVisibility()"
            class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700"
          >
            <iconify-icon
              [icon]="showConfirmPassword ? 'mdi:eye-off' : 'mdi:eye'"
              width="20"
              height="20"
            ></iconify-icon>
          </button>
        </div>
        <p *ngIf="confirmPasswordInvalid" class="text-red-500 text-sm mt-1">
          Las contraseñas no coinciden.
        </p>
      </div>

      <!-- Restablecer -->
      <button
        type="submit"
        [disabled]="isLoading"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-semibold transition-colors cursor-pointer disabled:bg-blue-300 disabled:cursor-not-allowed flex items-center justify-center"
      >
        <span *ngIf="!isLoading">Restablecer contraseña</span>
        <span *ngIf="isLoading" class="flex items-center">
          <iconify-icon icon="svg-spinners:180-ring" width="24" height="24" />
          Procesando...
        </span>
      </button>
    </form>

    <div class="flex flex-col sm:flex-row justify-between items-center mt-6">
      <!-- Volver al login -->
      <p class="text-center text-gray-600 mt-4 sm:mt-0">
        <a [routerLink]="['/login']" class="text-blue-600 hover:text-blue-800"
          >Volver al login</a
        >
      </p>
      <!-- Ir al inicio -->
      <p class="text-center text-gray-500 mt-4 sm:mt-0">
        <a
          [routerLink]="['/']"
          fragment="inicio"
          class="text-blue-600 hover:text-blue-800"
          >Ir al inicio</a
        >
      </p>
    </div>
  </div>
</section>
